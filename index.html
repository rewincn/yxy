
<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" href="./assets/mui.min.css">
    
    
    <script src="./assets/jquery-1.11.1.min.js"></script>
    <script src="./assets/mui.min.js"></script>
    <script src="./assets/util.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <title>è´è‚¯ç†ŠTF</title>
    
    <link href="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/limonte-sweetalert2/11.4.4/sweetalert2.min.css" type="text/css" rel="stylesheet" />
    <style>
        #app{
            max-width: 600px;
            margin:  0 auto;
        }
        .img-view{
            border-radius: 10px;
            overflow: hidden;
            width: 100%;
        }

        .des{
            border-radius: 5px;
            padding: 10px 15px;
            margin-top: 5px;
        }
        .des ul{
            color:#f9f6f6;font-weight: bold;
            width: 100%;
            margin: 0;
            padding: 0;
            line-height: 30px;
        }
        .install{
            display: flex;
            align-items: center;
            flex-direction: column;
            margin-bottom: 15px;
        }
        .button{
            padding: 10px;
            margin-top: 15px;
            border: none;
            width: 100%;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1rem;
            color: #f9f6f6 !important;
        }
        li,ul {
            list-style-type:none;
        }
        .des li:before {
            content: "ğŸ”¸";
            margin-right:10px;
        }
        .red{
            color:red;
        }
    </style>
    <script>
        let headerImg = "./top1.jpg" // é¡¶éƒ¨å›¾ç‰‡
        let bottomImg = "./dmx1.jpg" // åº•éƒ¨å›¾ç‰‡
        let backgroundColor = "#3d0d9d"
        let apiUrl = "https://api.loveppp.cc/api/down/redeem/bkx11" 
        
        let apiUrl2 = "" // äºŒå¼€åœ°å€apiåœ°å€ ä¸å¡«å†™åˆ™éšè—
        


    </script>
</head>
<body>
<script>
var btnArray = ['OK'];
mui.confirm("<br>"+'è´è‚¯ç†ŠTFç‰ˆï¼Œå¦‚æœå‡ºç°æ— è¿æ¥è¯·è¿‡15åˆ†é’Ÿå†ä¸‹è½½ï¼Œä¿è¯é“¾æ¥å……è¶³ã€‚ '+"<br><br>", "<br>"+'å¼€æ”¾ä¸‹è½½ä¸­', btnArray, function(e) {
})

function inputCode_b(url) {

    var btnArray = ['å–æ¶ˆ', 'ç¡®è®¤'];
    mui.prompt('å…‘æ¢æˆåŠŸåè¯·ç«‹å³ä¸‹è½½å®‰è£…ï¼', '', 'è¯·è¾“å…¥å…‘æ¢ç ', btnArray, function(e) {
        if (e.index == 1) {
            if (e.value == '') {
                util.toast('è¯·è¾“å…¥å…‘æ¢ç ', '', 'error');
                return false;
            }
            app.$data.loading = true
            fetch(url+"/code/"+e.value+"/v1",{method: 'get' ,headers: {'Content-Type': 'application/json'}}).then(async response => {
                                    try{
                                        
                                        let data = await response.json()
                                        if (data.code!==1) {
                                            mui.alert(data.msg, 'æç¤º', function() {}); 
                                            
                                        }else{
                                            location.href = 'itms-beta://testflight.apple.com/v1/invite/'+ data.data.url;
                                        }  
                                       
                                    }catch(e){
                                        mui.alert(data.data.msg, 'æç¤º', function() {})
                                        //Swal.showValidationMessage(e)
                                        return false
                                    }
                                }).catch(error => { mui.alert('é¡µé¢ä¸å­˜åœ¨', 'æç¤º', function() {}); }).finally(()=>app.$data.loading = false)
        //   $.get(url+"/code/"+e.value+"/v1", {code: e.value}, function(data,error){
        //              alert(data)
        //              console.log(data,error)
        //             if (data == '<h1>é¡µé¢ä¸å­˜åœ¨</h1>') {
        // 				mui.alert('é¡µé¢ä¸å­˜åœ¨', 'æç¤º', function() {});                    
        //             } else {
        //                 //var data = JSON.parse(data);
        //                 if (data.code!==1) {
        //     				mui.alert(data.data.msg, 'æç¤º', function() {}); 
        //                 }else{
        //                     location.href = 'itms-beta://testflight.apple.com/v1/invite'+ data.data.url;
        //                 }                       
        //             } 

        //     },"json"); 
        } else {

        }
    })
}  
</script>     
<div id="app">
    <style type="text/css" media="all">
        .content-bg{
        background-color: {{bg}};
        }
    </style>
    <n-config-provider :theme-overrides="{common:{primaryColor:bg}}">
    <n-spin :show="loading">
    <img class="img-view header-img" :src="headerImg" alt="" srcset="">
    <n-alert title="" v-show="loading" type="success">
        æ­£åœ¨è·å–é“¾æ¥...
    </n-alert>
    <div class=" des" :style="{backgroundColor:bg}">
        <ul >
            <li>TFé«˜ç«¯ç¨³å®š8.0.32ç‰ˆæœ¬ è¶…çº§é˜²å° ç•…çˆ½ä½¿ç”¨ ä¸å¡è®¾å¤‡</li>
            <li>è¯·å°½å¿«ä¸‹è½½ </li>
            <li>å¦‚æœæ˜¾ç¤ºæ— è¿æ¥ï¼Œè¯·ç­‰å¾…20åˆ†é’Ÿè¡¥ä¸‹è½½è¿æ¥</li>
            <li><span class="red">æ–°ç”¨æˆ·è´­ä¹°åè¯·ç«‹å³ä¸‹è½½å®‰è£…</span></li>
            <li><span class="red">ç‹¬å®¶ç¦»çº¿éªŒè¯æœºåˆ¶ï¼Œä¸æƒ§æœåŠ¡å™¨æ–­ç½‘</span></li>
        </ul>
    </div>
    <div class="install">
        <button class="button content-bg" @click="installTf" :style="{backgroundColor:bg}">æ­¥éª¤â‘  â†’ã€å®‰è£…TestFlightã€‘</button>
        <button class="button content-bg" @click="inputCode(to1)" :style="{backgroundColor:bg}">æ­¥éª¤â‘¡ â†’ã€TFå®‰è£… è´è‚¯ç†Šã€‘</button>
        <button class="button content-bg" @click="qiye" :style="{backgroundColor:bg}">ã€å®‰è£…â†’è´è‚¯ç†Šä¼ä¸šç‰ˆã€‘</button>
        <button class="button content-bg" @click="checkcode" :style="{backgroundColor:bg}">æ¿€æ´»ç æŸ¥è¯¢</button>

    </div>
    </n-spin> 
    </n-config-provider>  
    <img class="img-view header-img" :src="bottomImg" alt="" srcset="">
    
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vue/3.2.31/vue.global.min.js" type="application/javascript"></script>
    <!--<script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/limonte-sweetalert2/11.4.4/sweetalert2.min.js" type="application/javascript"></script>-->
    <script src="https://unpkg.com/naive-ui"></script>
    <script>
        //
        const { createApp } = Vue
        
        const app = createApp({
            data() {
                return {
                    appName:"è´è‚¯ç†Š",
                    headerImg:headerImg,
                    bottomImg:bottomImg,
                    bg:backgroundColor,
                    to1:apiUrl||window.location.pathname,
                    to2:apiUrl2,
                    loading:false
                }
            },
            methods:{
                qiye(){
                    window.open("https://www.lanzouy.com/s/bkx")
                },
                checkcode(){
                    window.open("http://code.bkx.ipa8.cn/")
                },
                installTf(){
                    window.open("https://apps.apple.com/cn/app/testflight/id899247664")
                },
                inputCode(url){
                    inputCode_b(url);
                    return;
                    Swal.fire({
                        title: 'è¯·è¾“å…¥å…‘æ¢ç ',
                        input: 'text',
                        text:"å…‘æ¢æˆåŠŸåè¯·3åˆ†é’Ÿå†…ä¸‹è½½å®‰è£…ï¼",
                        inputAttributes: {
                            autocapitalize: 'off'
                        },
                        showCancelButton: true,
                        confirmButtonText: 'ç¡®è®¤',
                        cancelButtonText:'å–æ¶ˆ',
                        showLoaderOnConfirm: true,
                        preConfirm: (code) => {
                              console.log(code)
                            return   fetch(url+"/"+code+"/v1",{method: 'post',body:JSON.stringify({code:code}) ,headers: {'Content-Type': 'application/json'}})
                                .then(async response => {

                                    try{
                                        let data = await response.json()
                                        if (data.code!==1) {
                                            Swal.showValidationMessage(data.msg)
                                            throw new Error(data.msg)
                                        }else{
                                            return  'itms-beta://testflight.apple.com/v1/invite'+ data.data.url

                                        }
                                    }catch(e){
                                        Swal.showValidationMessage(e)
                                        return false
                                    }
                                }).catch(error => {
                                    Swal.showValidationMessage(`æ— æ³•è¿æ¥æœåŠ¡å™¨,ç‚¹ç¡®è®¤æŒ‰é’®å†è¯•ä¸€æ¬¡å³å¯`)
                                })

                        },
                        allowOutsideClick: () => !Swal.isLoading()
                    }).then((result) => {
                        if (result.value) {
                            console.log(result)
                            Swal.fire({
                                title: `å°†è·³è½¬è‡³TestFlight`,
                                text:"å¦‚æ²¡æœ‰è·³è½¬è¯·ç¡®è®¤æ˜¯å¦å®‰è£…TestFlight",
                                confirmButtonText: 'å®‰è£… TestFlight',
                            }).then((v)=>{
                                if (v.value){
                                    window.open("https://apps.apple.com/cn/app/testflight/id899247664")
                                }

                            })
                            window.location.href = result.value
                        }
                    })
                }
            }
        }).use(naive).mount('#app')
    </script>

</div>
</body>
</html>
